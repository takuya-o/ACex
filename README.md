# AirCampus for Web Extender

Chromeブラウザ用のAirCampusのディスカッションの「発言数カウント」拡張機能を作りました。


## ビルド方法

### ビルド準備
crxmakeがある環境で、crxmakeに--key-outputオプションをつけて秘密キーACex.pemを作る。

### ビルド
./build.rbする。

### Gitlab-CI
dockerコンテナで、パッケージングをして、CIとしています。


## インストール方法

### 正式版のインストール
1. Chromeウェブストアからインストールする。(URLは限定公開)

### 開発版のインストール
1. ソースを展開する。
2. Chromeブラウザの「拡張機能」タブを開く。
3. デベロッパーモードのチェックボックスを選択してデベロッパーモードにする。
4. 「パッケージ化されていない拡張機能を読み込む」ボタンで./src/を開く。

※開発版では自動更新機能をまだ使っていないので、バージョンアップの都度インストールが必要です。


## 使い方

※一度開いた投稿数一覧の表はキャッシュされています。終了したディスカッションは常にキャッシュを利用して再表示されるので、終了後に更新が有った場合には、必要に応じて「強制取得」で再取得してください。

### AirCampus for Webの場合
1. ChromeブラウザーでAirCampus for Webを開くと、ツールバーのこの拡張機能アイコンが有効になります。
2. アイコンをクリックすると「Course List」タブが開きます。
4. 各コースがボタンになっているので、発言数をカウントしたいフォーラムまでボタンをクリックしてドリルダウンします。
5. 該当のディスカッションのボタンを押すと、別タブに投稿数一覧の表が開きます。

※終了したディスカッションは、「開講中のみ」ボタンをOffにすることにより表示されるようになります。

### AirCampusポータルの場合
1. ChromeブラウザーでAirCampusポータルでカウントしたいディスカッションを開いてください。
2. ツールバーのこの拡張機能のアイコンに赤く「count」とバッチがつきます。
3. アイコンをクリックすると、別タブに投稿数一覧の表が開きます。

※ディスカッションのページの一番上の「カウント」ボタンからも投稿数の一覧を開くことができますが、画面が崩れるので、将来的には「カウント」ボタンは無くす予定です。


## 開発

* git-flowでブランチ管理しています。
* 主な開発や課題管理はプライベートのgitlabでやっていて、githubは泥臭いものを減らした公開用です。


## 追加機能案 要件抽出中

* 対応済み ~~Chromeウェブストアからの配布~~
* スタイルシートでのきれいなデザイン
* 対応済み ~~「開講中のみ」のようなフィルター機能~~
* 対応済み ~~コースの表示順番を時系列に~~
* 対応済み ~~発言の多い順に表示~~
* 対応済み ~~ユーザーごとの被返信数カウント~~ from V0.0.4.0
* ユーザーごとの本文の文字数カウント
* 対応済み ~~削除された発言除外~~
* 発言中のURL抽出
* コースすべてのフォーラムなど複数のフォーラムの合計値の算出
* テスト中 Chromeウェブストアでのライセンス管理
* 対応済み ~~キャッシュによる高速化~~ from V0.0.8.0
* キャッシュを利用した更新部分のみの取得による高速化

## 追加/修正された機能
#### 0.0.9.3
・投稿数によるカラーリング。RTOCSは週に3件、それ以外は週に1件で黄色、それ以下だと赤色表示。

#### 0.0.8.0
・キャッシュによる高速化

#### 0.0.7.0
・AirCampusポータルに対応

#### 0.0.6.2
・Bugfix: 0.0.6.0以降、閉じたタブの管理に不具合がありクローズ済みのタブを再利用しようとしていた。

### 0.0.6.0
・Chromeウェブストアでのライセンス管理(実験的サポート)

#### 0.0.5.4
・Bugfix: 削除数のカウントが、削除された発言の前の人にカウントされていた。

#### 0.0.5.3
・Bugfix: Macでポップアップの殻が残る。
・Bugfix: 0.0.5.2の修正の影響で表示しているタブに飛ばす新たにタブを作成してしまう。

#### 0.0.5.2
・Bugfix: カウント結果表示タブのURLを変更しても検知できず再利用してしまう。

### 0.0.5.0
・返信数カウント
・自分の発言への返信をカウント
・ツールチップ
・表の罫線
・Bugfix: 削除数

### 0.0.4.0
* 発言数カウント結果を別タブで表示
* 削除数を表示
* 被返信数と発言数に対するその割合を表示




